# Roo Activity Logger ルール
## 作業開始準備

logs/をroo-activity-loggerでsearch_logsを使って確認して、現在のタスクを特定します。

ログ記録およびエラーハンドリングの項目を必ず実行してください。

## ログ記録

- 全てのログはroo-activity-loggerを使用して記録してください
- ログにはスタックトレースと実行コンテキストを含めてください
- 意図と文脈情報を記録してください

## アクティビティログ記録

開発活動は、以下の方針に従って記録してください。

### 通常活動の記録

- 全ての開発活動はroo-activity-loggerを使用して記録してください
- アクティビティログは`logs/activity/`ディレクトリに保存してください
- ログには以下の情報を含めてください：
  - 活動の種類（コード生成、コマンド実行、ファイル操作など）
  - 活動の要約
  - 活動の詳細情報
  - 活動の意図と文脈
- 重要な決定や設計選択については、その理由も記録してください

### 活動の種類

以下の活動種類に分類してログを記録してください：

- `command_execution`：コマンド実行の記録
- `code_generation`：コード生成の記録
- `file_operation`：ファイル操作の記録
- `decision_made`：設計上の決定の記録
- `conversation`：ユーザーとの対話の記録

### ログレベル

活動の重要度に応じて適切なログレベルを設定してください：

- `debug`：詳細なデバッグ情報
- `info`：通常の情報（デフォルト）
- `warn`：警告情報
- `error`：エラー情報

## 分析データ記録

開発活動の分析データは、以下の方針に従って記録してください。

### 分析データの種類

以下のデータを分析用に記録してください：

- コード品質メトリクス（複雑度、行数、依存関係など）
- パフォーマンス測定データ（実行時間、メモリ使用量など）
- 開発効率データ（タスク完了時間、コード生成量など）
- エラー発生頻度と種類の統計
- リファクタリング活動の統計

### 記録方法

- 全ての分析データはroo-activity-loggerを使用して記録してください
- 分析データログは`logs/analytics/`ディレクトリに保存してください
- ログには以下の情報を含めてください：
  - 測定名と種類
  - 数値データと単位
  - 比較基準値（該当する場合）
  - 測定コンテキスト
- 時系列データの場合は、トレンド分析が可能な形式で記録してください

### データ集計の頻度

- 継続的な開発活動中は1時間ごとに集計データを記録してください
- 重要な開発イベント（リファクタリング完了、機能実装完了など）の前後には必ず記録してください
- プロジェクトの節目（スプリント完了、リリースなど）には詳細な分析データを記録してください

## エラーハンドリング

エラーが発生した場合は、以下の方針に従って処理してください。

### エラー記録

- 全てのエラーはroo-activity-loggerを使用して記録してください
- エラーログは`error-logs`ディレクトリに保存してください
- ログにはスタックトレースと実行コンテキストを含めてください
- エラーの意図と文脈情報を記録してください

### 再試行ポリシー

- 接続エラーやタイムアウトエラーは最大3回まで再試行してください
- 再試行する前に「再試行を行う理由」を記録してください
- 型エラーや構文エラーは再試行せず、明確なエラーメッセージを提示してください

### エラーの分析

- 同様のエラーが繰り返し発生する場合は、根本的な原因を分析してください
- エラーパターンを特定し、一般化された解決策を提案してください
- コードの改善提案があれば、それも記録してください